---
import Layout from '../../layouts/Layout.astro'
import path from 'node:path'
import { promises as fs } from 'node:fs'
import List from '../../components/ui/List.astro'
import ListItem from '../../components/ui/ListItem.astro'

const materiasDirectory = path.resolve('./public/materias')

let materias: string[] = []
try {
  materias = await fs.readdir(materiasDirectory)
} catch (error) {
  throw new Error('There was an error')
}
---

<Layout title='Materias'>
  <header class='flex'>
    <span>Materias</span>
  </header>
  <List>
    {
      materias.map((materia) => (
        <ListItem href={`/materias/${materia}`} id={'materia' + materia}>
          {materia.replace(/-/g, ' ')}
        </ListItem>
      ))
    }
  </List>
</Layout>
